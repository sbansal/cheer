<% title "Categories" %>
<div class="container">
  <div class="border p-2" data-controller="categories">
    <div class="col-sm-4">
      <%= text_field_tag :category_id, '', class: 'form-control', data: {action: 'focus->categories#showCategoriesDropdown'}%>
      <div id="categories-container" data-categories-target="results" class="hide">
        <%= render 'child_categories', categories: @category_nodes %>
      </div>
    </div>
  </div>

  <table class="table">
    <thead>
      <tr class="small grey-100 text-uppercase">
        <th scope="col">#</th>
        <th scope="col">Descriptive Name</th>
        <th scope="col">Group</th>
        <th scope="col">Hierarchy</th>
        <th scope="col">Plaid Category ID</th>
        <th scope="col">Rank</th>
        <th scope="col">Essential</th>
      </tr>
    </thead>
    <tbody>
      <% @categories.each_with_index do |category, index| %>
        <tr class="med">
          <td><%= index + 1%></td>
          <td><%= category.descriptive_name %></td>
          <td scope="row"><%= category.group.humanize %></th>
          <td><%= category.hierarchy %></td>
          <td><%= category.plaid_category_id %></td>
          <td><%= category.rank%></td>
          <td><%= category.essential ? 'Yes' : 'No'%></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
