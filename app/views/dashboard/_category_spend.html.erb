<div class="border rounded-lg">
  <div class="row m-0 border-bottom">
    <div class="col p-3">
      <div class="font-weight-bold">Total Money Out</div>
    </div>
    <div class="col text-right p-3"><%= number_to_currency(@cashflow.total_money_out.abs) %></div>
  </div>
  <div class="row m-0 my-4">
    <div class="col p-3"><span>Essential Spend</span></div>
    <div class="col text-right p-3"><%= number_to_currency(@spend_by_categories[:essentials_total]) %></div>
  </div>
  <% if @spend_by_categories[:essentials_by_categories].empty? %>
    <div class="row m-0">
      <div class="col-lg-12 py-3 border-bottom">
        <div class="text-center grey font-italic med">No transactions yet.</div>
      </div>
    </div>
  <% else %>
    <% @spend_by_categories[:essentials_by_categories].each do |spend| %>
      <% if spend.transactions.count > 0 %>
      <div class="row m-0 border-bottom category-row" data-controller="transactions" data-action="click->transactions#showTransactions">
        <div class="col-lg-9 p-3">
          <div class=""><%= spend.category_name %></div>
          <div class="small grey">
            <%= link_to "#{pluralize(spend.transactions.count, 'transactions')}", '#', class: 'primary underline'%>
          </div>
        </div>
        <div class="col-lg-3 p-3 text-right"><%= number_to_currency(spend.total_spend)%></div>
        <div class="small col-lg-12 transactions-summary hide primary-900-bg my-3">
          <%= render 'transactions/transactions_summary_container', transactions: spend.transactions %>
        </div>
      </div>
      <% end %>
    <% end %>
  <% end%>

  <div class="row m-0 my-4">
    <div class="col p-3"><span>Non-Essential Spend</span></div>
    <div class="col text-right p-3"><%= number_to_currency(@spend_by_categories[:extras_total]) %></div>
  </div>
  <% if @spend_by_categories[:extras_by_categories].empty? %>
    <div class="row m-0">
      <div class="col-lg-12 py-3 border-bottom">
        <div class="text-center grey font-italic med">No transactions yet.</div>
      </div>
    </div>
  <% else %>
    <% @spend_by_categories[:extras_by_categories].each do |spend| %>
      <% if spend.transactions.count > 0 %>
      <div class="row m-0 border-bottom category-row" data-controller="transactions" data-action="click->transactions#showTransactions">
        <div class="col-lg-9 p-3">
          <div class=""><%= spend.category_name %></div>
          <div class="small grey">
            <%= link_to "#{pluralize(spend.transactions.count, 'transactions')}", '',
            data: {category_name: "#{spend.category_name}", cashflow_type: 'money_out', essential: 'true',
            action: 'click->transactions#showTransactionsModal'}, class: 'primary underline'%>
          </div>
        </div>
        <div class="col-lg-3 p-3 text-right"><%= number_to_currency(spend.total_spend)%></div>
        <div class="small col-lg-12 transactions-summary hide primary-900-bg my-3">
          <%= render 'transactions/transactions_summary_container', transactions: spend.transactions %>
        </div>
      </div>
      <% end %>
    <% end %>
  <% end %>
</div>